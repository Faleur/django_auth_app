{% extends 'base.html' %}

{% block title %}Rapports{% endblock %}

{% block content %}
<h2 class="mb-4">Rapports et Analyses</h2>

<!-- Résumé des statistiques -->
<div class="row mb-4">
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Température Moyenne</h5>
                <p class="display-4">22.8°C</p>
                <p class="text-muted">Sur les dernières 24h</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Humidité Moyenne</h5>
                <p class="display-4">43%</p>
                <p class="text-muted">Sur les dernières 24h</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Luminosité Moyenne</h5>
                <p class="display-4">550 lux</p>
                <p class="text-muted">Sur les dernières 24h</p>
            </div>
        </div>
    </div>
</div>

<!-- Graphiques d'analyse -->
<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Tendances Mensuelles</h5>
                <div class="chart-container">
                    <canvas id="monthlyTrends"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Distribution des Valeurs</h5>
                <div class="chart-container">
                    <canvas id="valueDistribution"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Options d'export -->
<div class="card">
    <div class="card-body">
        <h5 class="card-title">Exporter les Données</h5>
        <div class="row">
            <div class="col-md-4">
                <label for="exportFormat" class="form-label">Format</label>
                <select class="form-select" id="exportFormat">
                    <option>PDF</option>
                    <option>Excel</option>
                    <option>CSV</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="exportPeriod" class="form-label">Période</label>
                <select class="form-select" id="exportPeriod">
                    <option>Dernières 24h</option>
                    <option>Dernière semaine</option>
                    <option>Dernier mois</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label">&nbsp;</label>
                <button class="btn btn-primary d-block">Générer le rapport</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Graphique des tendances mensuelles
    const monthlyTrends = new Chart(document.getElementById('monthlyTrends').getContext('2d'), {
        type: 'line',
        data: {
            labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun'],
            datasets: [{
                label: 'Température',
                data: [20, 21, 22, 23, 24, 23],
                borderColor: 'rgb(220, 53, 69)',
                fill: false
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false
        }
    });

    // Graphique de distribution des valeurs
    const valueDistribution = new Chart(document.getElementById('valueDistribution').getContext('2d'), {
        type: 'bar',
        data: {
            labels: ['15-18°C', '18-21°C', '21-24°C', '24-27°C', '27-30°C'],
            datasets: [{
                label: 'Fréquence',
                data: [5, 15, 40, 30, 10],
                backgroundColor: 'rgba(220, 53, 69, 0.5)'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false
        }
    });
</script>
{% endblock %}
